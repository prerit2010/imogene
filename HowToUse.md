

# Pre-requisites #
> ## User knowledge ##
> The _**imogene**_ studio is an application development platform. It aims to develop applications more easily and more quickly.

> The modeling phase of the development process does not require any computer science knowledge.

> It consists in defining the forms which will be available in the application. This work is done using a graphical editor which enables to define the application entities (for example, the application will deal with Patients, a patient has a name, a birthday and an address, etc).

> To create the application model, the user has to know what the application should do, based on a specification document or on its own experience.

> ## The Eclipse workbench ##
> The _**imogene**_ studio is based on the [Eclipse](http://www.eclipse.org/) framework.

> Eclipse is an open-source Java IDE (Integrated Development Environment) which has become a standard in the software development world.

> The _**imogene**_ Studio is fully integrated in the Eclipse IDE. It is using the Eclipse desktop development environment and benefits of all its menu items and wizards.

> _**imogene**_ specific functionalities are provided by open source plugins and by specifically developed plugins that extend the Eclipse capabilities.

> The studio enables to create and edit a new model project and, based on this model project, to generate the corresponding _**imogene**_ IS applications.

> In order to work with the _**imogene**_ studio, some basic knowledge of the Eclipse workbench is necessary. A user guide about the Eclipse IDE is available at this [link](http://help.eclipse.org/help33/index.jsp).

# Application development #

> ## Launching the imogene Studio ##
> Launch the Eclipse instance for which the _**imogene**_ plugins have been installed.

> A dialog box pops up asking to enter a workspace name. The first time a workspace is launched, a Welcome page opens itself. Close it.


> ## Opening the imogene Perspective ##
> In the Eclipse MenuBar, select `'Window/Open Perspective/Other/imogene'`.

> The default Eclipse views are reorganised to display the _**imogene**_ Perspective.

> This perspective displays the view showing the _**imogene**_ Projects on the right panel. Each one of these projects includes a Model and a set of Generated applications. In the same panel, a second tabulation enables to display the 'Properties' of the different data model objects.


> ## Creating an imogene Model ##
> As previously explained, the first step of the development of a Data Collection Information System is to model the data collection forms. This process is done through a graphical modelling editor.

> In Eclipse, select `File/New/Other`. A Dialog Box opens itself, it enables to select a project wizard. Browse through the different available wizards until you find the _**imogene**_ folder. Select the 'New imogene model' wizard to create a new _**imogene**_ model which will be the base of a new _**imogene**_ project.

> For the item 'Specific workflows', leave the default value 'No, I don't want'. Enter the name of the project.

> The wizard creates an _**imogene**_ project. It appears in the _**imogene**_ projects view. An _**imogene**_ project has 2 sub folders. One is dealing with the Data model, the other is dealing with the set of applications that will be generated by the Studio based on the data model.

> The data model itself is the file xxx.imog. It is an xml file that can be opened using a text editor or using the _**imogene**_ Model Graphical Editor.

> Click twice on the model file to open it with the _**imogene**_ Model Graphical Editor. The Tree View showing the model entities opens itself in the left panel.


> ## Modelling entities with the imogene Model Editor ##
> ### Presentation ###
> The _**imogene**_ Model Editor enables to create a Model of the business entities that the application will manipulate.

> Speaking of data collection applications, these entities will be the forms that will be used for data collection.
> The modelling work will consist mainly in defining these forms, the fields they contain and the properties associated with all these objects.

> The _**imogene**_ Model Editor presents the model as a Tree View. Each object has a parent, excepting the Root object (the Project itself).

> To add an object to the model, select the parent object and do a right click. In the menu items, select 'New Child' to add a child to the parent object (for instance to add a Field to a Field Group), or select 'New Sibling' to add a 'brother' (object of the same level) to the parent (for instance another Card Entity from a Card Entity).

> Each object of the Model has properties. It includes for instance the name and the short name of the object. Each object type has its own set of properties.

> To display the model object properties, select the `Properties` tabulation in the right panel, and click on one of the model objects.

> Otherwise, in the menu items, select `Window/Show View/Properties`. The Property panel opens itself.

> ### The Model Objects ###

> Check the ModelDescription page


> ## The imogene Model Editor utility ##
> ### The 'Generate Short Names' utility ###
> Adding short names to the model can take some time. In order to facilitate this work, the studio has a utility which enables to automatically generate all of the object model short names.

> Nevertheless it is advised to define meaningful short names for the Card Entities, for instance 'PAT' for a Patient Card Entity. The reason is that the Card Entity short names are used in the data model to reference the Card Entity, and also in the Information System database, each record ID will be prefixed by this short name. Thus having meaningful short names for Card Entities can be helpful. For the other model objects, it not so important. The utility will create automatically the short names when they are not defined but will keep the user entered ones.

> To run the utility tool, select the model file and do a right click. In the Dialog Window, go to the _**imogene**_ part and select 'Add short names'.

> ### The 'Generate Definitions Objects' utility ###
> Adding Definition objects for each model Language can take some time. In order to facilitate this work, the studio has a utility which enables to automatically generate all of the object model Definition objects.

> It will add Definition objects for all concerned model objects and for each defined Language. In the 'Display' property of the Definition object, it will put by default the Object name, and it will fill in also the Locale property with the Language ISO codes.

> To run the utility tool, select the model file and do a right click. In the Dialog Window, go to the _**imogene**_ part and select 'Add descriptions'.


> ## Model Validation ##
> Before generating the _**imogene**_ applications, the _**imogene**_ model should be validated. This process will detect the possible errors in the model and will validate that the generated applications compile and work well.

> To validate a _**imogene**_ model, do a right click on the Project object of the model and select 'Validate' in the context menu.

> The validation process will detect if the model should be updated so that it is ready to be used for the application generation. This validation process guarantees (in principle) that the generated application will not get errors.


> ## Application Generation ##
> ### Setting the imogene Model Project properties ###
> Before generating the applications, the _**imogene**_ Model Project properties must be set.

> Right click on the _**imogene**_ model project name and select the item 'Properties'.

> In the dialog box that opens, select the item 'Generation imogene'. The corresponding opens and presents the _**imogene**_ properties that have to be set.

> #### Administrator account ####

  * **Administrator password**: the password used to connect to the applications as the Information Administrator. 	By default, the application default user login is **admin**. The password is **epipassword**.

> #### Project version ####
> To be completed

> #### Database properties ####
> These properties define how the applications will connect to the central database that will store the collected data. They are required. They depend on the type of database that is used. Until now the 2 following database have been successfully tested, MySQL and PostgreSQL. Other databases should be supported but have not been tested until now.


  * **Driver JDBC**: the JDBC driver used to connect to the database
    * for MySQL: com.mysql.jdbc.Driver
    * for PostgreSQL: org.postgresql.Driver

  * **URL JDBC**: the JDBC URL to connect to the database
    * for MySQL: `jdbc:mysql://server_adress/db_name`
    * for PostgreSQL: `jdbc:postgresql://server_adress/db_name`

  * **Login JDBC**: the login to connect to the database

  * **Password JDBC**: the password to connect to the database

  * **Hibernate Dialect**: the dialect used to communicate with the database
    * for MySQL: org.hibernate.dialect.MySQLDialect
    * for PostgreSQL: org.hibernate.dialect.PostgreSQLDialect

> #### Binaries and media ####
> The Binary data (photos, videos, sound, etc) that are collected via the applications are not stored in the database. They are stored in the server file system, the server where the Web application and the

> Synchronization application are deployed. Both these applications are going to access that folder so the folder should be accessible in read and write mode by both applications.


  * **Binaries folder on the server**: the folder on the server where the binary files are going to be copied.
  * **Video to .flv**: the program to convert video files into flash. If not set, no convertion will be performed by the program
  * **Audio to .mp3**: the program to convert audio files into mp3. If not set, no convertion will be performed by the program

> #### URL for deployment ####
> These properties are only required if the applications are configured to send notifications.


  * **SMTP Serveur**: the SMTP server that will be used to send email notifications
  * **SMTP Login**: the login to connect to the SMTP server
  * **SMTP Password**: the password to connect to the SMTP server

> #### SMTP server properties ####
> These properties are only required if the applications are configured to send notifications.

  * **Web Application**: The imogene Web application url
  * **Synchronisation Server**: The imogene Synchronisation Server url
  * **Notification Server**: The imogene Notification Server url

> ### Generating the imogene applications ###
> Once the _**imogene**_ model is validated and the _**imogene**_ model project properties set, the _**imogene**_, applications can be generated. In order to generate an application, right click on the _**imogene**_ project name and select 'imogene' in the context menu. Then select in the list the application type to generate.

> Several application types can be generated:

  * **'Web Application Generation**': This item enables to generate the _**imogene**_ Web application.
  * 
  * **'Synchronization server Generation**': This item enables to generate the synchronization server that will synchronize the data between the Mobile and Desktop applications locally stored data and the central database data.

  * **'Generation Initializer**': This item enables to generate an application that will enable to initialize the _**imogene**_ central database with default parameters like a default user and default roles

  * **'Desktop RCP Generation**': This item enables to generate the _**imogene**_ Desktop application.

  * **'Notifier Generation**': This item enables to generate the _**imogene**_ application that will manage Notifications sending.
  * 
  * **'Generation Android**': This item enables to generate the _**imogene**_ Android application that run on Android mobile terminals.

  * **'Administration Generation**': This item enables to generate the _**imogene**_ Web application to administrate the Information Users.

> In the wizard, enter the name of the project.

> Depending on the application, the wizard can present some specific properties that can be updated.

> To be completed

> The corresponding application is generated and an Eclipse project is created for it. If the generation went well the Eclipse project compiles well.


# Application Deployment #
> ## Creating the imogene central database ##
> The creation of the _**imogene**_ central database depends on the chosen type of database. As previously mentioned 2 databases have been successfully tested for _**imogene**_, MySQL and PostgreSQL. Other databases should be supported but have not been tested until now.

> Using the chosen database administration tool, create the database that will be queried by the _**imogene**_ applications

> This phase aims to create an empty database only. The _**imogene**_ deployment process will automatically create the _**imogene**_ application tables.


> ## Initializing the central database ##
> Before being able to login to a _**imogene**_ application, the central database has to be initialized.

> The first deployment of a Synchronization application will created all the database tables. This deployment has to be done before being able to initialize the database.

> Running the 'imogene Initializer' application will enable to initialize the database.

> Right click on the 'imogene Initializer' application project name. In the context window, select 'Run as' and select 'Java application'. Select the Sql Insert application name in the Java application list. Click OK, the application is launched and inserts default user and role instances in the database tables.

> The application default user login is **admin**. Its password is **epipassword**.

> Now that the default user and roles have been inserted in the database, the Web application administrator can login to the application.

> ## Default roles ##
> The default user has access and administration privileges. It is assigned too all the roles that have been defined in the model.

> There are 2 different roles for the applications:

  * 'administrator': The default role for having access to the Administration application and to have access to all applications with full privileges (read and edit privileges on all forms).
  * 'delete': The default role to be able to delete entries in the database from the Web application.

> Only the default user 'admin' is assigned the 'administrator' and 'delete' privileges. In order to be able to assign these privileges to an actor, these roles have to be added in the model (in that case check the java class of the SQL Insert application to be sure that the program does not insert twice the same values).

> An actor will be able to delete an entry of a given CardEntity from the Web application if he is assigned the 'delete' role and if he can edit the given CardEntity (he has a role enabling to edit at least one field group of the CardEntity).

> ## Deploying the imogene Synchronisation application ##
> In order to deploy the _**imogene**_ Synchronisation application, do a right click on the application project. In the context menu, select 'Run on Server' in order to run the application on the local Tomcat service for instance. Or do a right click on the application project. In the context menu, select 'Export' and in the resulting Dialog Box, select 'Web.War File'.This War file can then be deployed in Tomcat.

> During this process, if it is the first time that a _**imogene**_ application is connecting itself to the database, the deployment process will create the tables of the _**imogene**_ central database.

> If the model has been updated and that a new application is generated and deployed, the deployment process will update the database. This process will add tables and fields depending on the model modifications. But no field nor table, nor constraint will be deleted. For that reason, when relations are involved (put as constraints in the database), it is better to delete the tables so that the deployment process re-creates them.

> Before being able to login to the _**imogene**_ application, the database has to be initialized with a default user and role.

> ## Deploying the Web or Admin Web application ##
> The Web and Administration applications have to be compiled before being deployed.

> To do this, click on the Web application project, and select `Google/GWT Compile`.

> Once this process is finished, the application can be deployed.

> As for the Synchronisation application, in order to deploy the Web and Administration applications, do a right click on the application project. In the context menu, select 'Run on Server' in order to run the application on the local Tomcat service for instance. Or do a right click on the application project. In the context menu, select 'Export' and in the resulting Dialog Box, select 'Web.War File'. This War file can then be deployed in Tomcat.

> ## Deploying the imogene Android application using the imogene Market (Normal way) ##

> ### Android application market creation ###
> To be completed

> ### First installation on the Android terminal ###
> To be completed

> ## Deploying the imogene Android application copying the apk directly (Short way, for development only) ##
> To be completed


# Application Internationalization #
> To be completed


# Notification #
> To be completed